const config={navbarHideDelay:3e3,topTriggerHeight:50,scrollSpeed:800,easing:"easeInOutCubic",wheelDeltaThreshold:30,containerSelector:".container, .container1, .container2, .container3, .container4",navLinksSelector:".navbar-nav a.nav-link",scrollOffset:30,scrollThreshold:.3},navbar=document.querySelector(".navbar"),containers=Array.from(document.querySelectorAll(config.containerSelector));let appState={lastScroll:0,mouseInTopArea:!1,hideTimeout:null,isScrolling:!1,currentPosition:window.pageYOffset,lastScrollTime:Date.now()};const easings={easeInOutCubic:e=>e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2,easeOutCubic:e=>1-Math.pow(1-e,3)},requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)};function smoothScroll(e){if(appState.isScrolling)return;appState.isScrolling=!0;let t=window.pageYOffset,n=e-t,a=performance.now();function i(e){let o=Math.min((e-a)/config.scrollSpeed,1),l=easings[config.easing](o);window.scrollTo(0,t+n*l),o<1?requestAnimFrame(i):(appState.isScrolling=!1,updateActiveNavLink())}requestAnimFrame(i)}function updateActiveNavLink(){let e=window.pageYOffset+navbar.offsetHeight+50,t="";containers.forEach(n=>{let a=n.offsetTop,i=n.offsetHeight;if(e>=a&&e<a+i){let o=n.id?n:n.querySelector("[id]");o&&(t=o.getAttribute("id"))}}),document.querySelectorAll(config.navLinksSelector).forEach(e=>{e.classList.remove("active"),e.getAttribute("href")===`#${t}`&&e.classList.add("active")})}function handleWheelScroll(e){if(appState.isScrolling){e.preventDefault();return}let t=Date.now();if(t-appState.lastScrollTime<500)return;appState.lastScrollTime=t;let n=Math.sign(e.deltaY);if(Math.abs(e.deltaY)<config.wheelDeltaThreshold)return;e.preventDefault();let a=getCurrentContainerIndex();if(-1===a)return;let i;i=n>0?Math.min(a+1,containers.length-1):Math.max(a-1,0);let o=containers[i].offsetTop-config.scrollOffset;smoothScroll(o)}function getCurrentContainerIndex(){let e=window.pageYOffset+config.scrollOffset,t=window.innerHeight,n=t*config.scrollThreshold;for(let a=0;a<containers.length;a++){let i=containers[a],o=i.offsetTop,l=o+i.offsetHeight;if(e>=o-n&&e<l-n)return a}let r=0,s=1/0;return containers.forEach((t,n)=>{let a=t.offsetTop,i=Math.abs(e-a);i<s&&(s=i,r=n)}),r}function handleKeyboardNavigation(e){if(!appState.isScrolling){if("ArrowDown"===e.key||"PageDown"===e.key){e.preventDefault();let t=containers.findIndex(e=>{let t=e.getBoundingClientRect();return t.top<=navbar.offsetHeight&&t.bottom>=navbar.offsetHeight}),n=Math.min(t+1,containers.length-1);smoothScroll(containers[n].offsetTop-navbar.offsetHeight)}else if("ArrowUp"===e.key||"PageUp"===e.key){e.preventDefault();let a=containers.findIndex(e=>{let t=e.getBoundingClientRect();return t.top<=navbar.offsetHeight&&t.bottom>=navbar.offsetHeight});smoothScroll(containers[Math.max(a-1,0)].offsetTop-navbar.offsetHeight)}else"Home"===e.key?(e.preventDefault(),smoothScroll(0)):"End"===e.key&&(e.preventDefault(),smoothScroll(document.body.scrollHeight))}}function handleNavbarVisibility(){let e=window.pageYOffset;clearTimeout(appState.hideTimeout),e<=0?navbar.classList.add("visible"):e>appState.lastScroll&&e>100?appState.mouseInTopArea||navbar.classList.remove("visible"):(navbar.classList.add("visible"),appState.hideTimeout=setTimeout(()=>{!appState.mouseInTopArea&&window.pageYOffset>0&&navbar.classList.remove("visible")},config.navbarHideDelay)),appState.lastScroll=e,updateActiveNavLink()}function handleMouseMove(e){appState.mouseInTopArea=e.clientY<config.topTriggerHeight,navbar.classList.toggle("visible",appState.mouseInTopArea||0===window.pageYOffset)}function handleNavLinkClick(e){e.preventDefault();let t=this.getAttribute("href"),n=document.querySelector(t);if(n){let a=n.offsetTop-navbar.offsetHeight;smoothScroll(a),navbar.classList.add("visible"),document.querySelectorAll(config.navLinksSelector).forEach(e=>{e.classList.remove("active")}),this.classList.add("active")}}function init(){navbar.classList.add("visible"),window.addEventListener("scroll",handleNavbarVisibility),document.addEventListener("mousemove",handleMouseMove),document.addEventListener("wheel",handleWheelScroll,{passive:!1}),document.addEventListener("keydown",handleKeyboardNavigation),document.querySelectorAll(config.navLinksSelector).forEach(e=>{e.addEventListener("click",handleNavLinkClick)}),updateActiveNavLink(),setTimeout(updateActiveNavLink,100),"scrollBehavior"in document.documentElement.style||(window.smoothScroll=smoothScroll)}document.addEventListener("DOMContentLoaded",init);